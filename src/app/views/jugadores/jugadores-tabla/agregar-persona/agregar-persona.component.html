<!-- <div *ngFor="let object_campo of campos; let i = index"> -->

<!-- ********************* -->

<mat-stepper orientation="vertical" linear="false" #stepper>
    <mat-step *ngFor="let object_campo of campos; let i = index"
        [stepControl]="playerForm[i]"
        errorMessage="Revise el formulario. Contiene errores o faltan datos.">
        <ng-template matStepLabel> {{ jugadorEtiquetaGrupo[i].view }}
        </ng-template>
        <form class="form-contenedor" [formGroup]="playerForm[i]"
            *ngFor="let campo of campos[i];">
            <mat-form-field *ngIf="campo.esCadena" class="form-campo"
                appearance="fill">
                <mat-label class="form-etiqueta" for="campo.name">
                    {{ namesByCampo('viewName', campo.name) }}
                </mat-label>
                <input class="form-input" matInput id={{campo.name}}
                    formControlName="{{campo.name}}"
                    placeholder="{{ campo.sugerencia }}"
                    (blur)="updateErrorMessage()"
                    (input)="onInput($event, i)" />

                @if (playerForm[i].get(campo.name)?.invalid) {
                <mat-error>{{errorMessage[campo.name]()}}</mat-error>
                }
                <mat-hint
                    align="end">{{value[campo.name]().length}}/255</mat-hint>

            </mat-form-field>

            <mat-form-field *ngIf="campo.esNumeroMediano"
                class="form-campo-numero" appearance="fill">
                <mat-label class="form-etiqueta" for="campo.name"> {{
                    namesByCampo('viewName', campo.name) }}</mat-label>
                <input matInput type="number" id={{campo.name}}
                    formControlName="{{campo.name}}"
                    (blur)="updateErrorMessage()"
                    (input)="onInput($event, i)"
                    placeholder="{{ campo.sugerencia }}" />
                @if (playerForm[i].get(campo.name)?.invalid) {
                <mat-error>{{errorMessage[campo.name]()}}</mat-error>
                }
                <mat-hint
                    align="end">{{campo.minVal}}-{{campo.maxVal}}</mat-hint>
            </mat-form-field>

            <mat-form-field *ngIf="campo.esUnico" class="form-campo-select"
                appearance="fill">
                <mat-label class="form-etiqueta" for="campo.name"> {{
                    namesByCampo('viewName', campo.name) }}
                </mat-label>
                <mat-select class="form-select" id={{campo.name}}
                    formControlName="{{campo.name}}"
                    (blur)="updateErrorMessage()">
                    <mat-option
                        *ngFor="let opcion of opciones[campo.name];"
                        value="{{ opcion.codigo }}">{{ opcion.view }}
                    </mat-option>
                </mat-select>
                @if (playerForm[i].get(campo.name)?.invalid) {
                <mat-error>{{errorMessage[campo.name]()}}</mat-error>
                }
                <mat-hint align="end">Menú Desplegable ^</mat-hint>
            </mat-form-field>

            <mat-slider *ngIf="campo.esNumeroPequenio" min={{campo.minVal}}
                max={{campo.maxVal}} showTickMarks
                discrete>
                <mat-label class="form-etiqueta" for="campo.name">
                    {{ namesByCampo('viewName', campo.name) }}
                </mat-label>
                <input matSliderThumb formControlName="{{campo.name}}">
            </mat-slider>

            <mat-form-field *ngIf="campo.esMoneda" class="form-campo-numero"
                appearance="fill"
                floatLabel="always">
                <mat-label for="campo.name"> {{ namesByCampo('viewName',
                    campo.name)
                    }}</mat-label>
                <input class="form-campo-euro" matInput type="number"
                    id={{campo.name}}
                    formControlName="{{campo.name}}"
                    (blur)="updateErrorMessage()"
                    (input)="onInput($event, i)"
                    placeholder="{{ campo.sugerencia }}" />
                <span matTextPrefix>€&nbsp;</span>
                <span matTextSuffix>.00</span>
                @if (playerForm[i].get(campo.name)?.invalid) {
                <mat-error>{{errorMessage[campo.name]()}}</mat-error>
                }
                <mat-hint
                    align="end">{{campo.minVal}}-{{campo.maxVal}}</mat-hint>
            </mat-form-field>

            <mat-form-field *ngIf="campo.esMultiple"
                class="form-campo-multiselect"
                appearance="fill">
                <mat-label class="form-etiqueta" for="campo.name"> {{
                    namesByCampo('viewName', campo.name)
                    }}
                </mat-label>
                <mat-select class="form-select" id={{campo.name}}
                    formControlName="{{campo.name}}"
                    multiple
                    (blur)="updateErrorMessage()">
                    <mat-option
                        *ngFor="let opcion of opciones[campo.name];"
                        value="{{ opcion.codigo }}">{{ opcion.view }}
                    </mat-option>

                </mat-select>
                @if (playerForm[i].get(campo.name)?.invalid) {
                <mat-error>{{errorMessage[campo.name]()}}</mat-error>
                }
                <mat-hint align="end">Menú Desplegable ^</mat-hint>
            </mat-form-field>
            <div *ngIf="campo.esRangoCategorias">
                <mat-slider [min]="campo.minVal"
                    [max]="campo.maxVal" showTickMarks>
                    <mat-label class="form-etiqueta" for="campo.name">
                        {{ namesByCampo('viewName', campo.name) }}
                    </mat-label>
                    <input type="range" value="{{+campo.minVal}}"
                        matSliderStartThumb
                        formControlName="{{campo.name +  '1'}}">
                    <input type="range" value="{{+campo.maxVal}}"
                        matSliderEndThumb
                        formControlName="{{campo.name +  '2'}}">
                </mat-slider>
                <div>
                    <label>

                        {{ getValueFromSlider(campo,
                        this.playerForm[i].get(campo.name + '1')?.value) }}/{{
                        getValueFromSlider(campo,
                        this.playerForm[i].get(campo.name + '2')?.value) }}
                        <!-- {{ getValueFromSlider(campo, slider1.value) }}/{{
                        getValueFromSlider(campo, slider2.value) }} -->
                    </label>
                </div>
            </div>
        </form>
        <div>
            <button *ngIf="i > 0" mat-button matStepperPrevious>Previo</button>
            <button mat-button matStepperNext> Siguiente </button>
        </div>
    </mat-step>

    <mat-step>
        <ng-template matStepLabel>Listo</ng-template>
        <p>Listo!</p>
        <div>
            <button mat-button matStepperPrevious>Previo</button>
            <button mat-button (click)="stepper.reset()">Reiniciar</button>
            <button type="submit" mat-button
                (click)="CrearJugador()">Guardar</button>
        </div>
    </mat-step>
</mat-stepper>

<!-- [disabled]="!playerForm[0].valid || !playerForm[1].valid ||
!playerForm[2].valid || !playerForm[3].valid || 
!playerForm[4].valid || !playerForm[5].valid ||
!playerForm[6].valid" -->